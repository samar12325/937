<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…Ø¤Ø´Ø± Ø¨Ø±Ø³Ø¬ÙŠÙ†ÙŠ </title>

  <!-- Tailwind CSS -->
  <link rel="stylesheet" href="pressganey.css">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!-- Chart.js + Plugins -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

  <!-- Excel Import -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

  <!-- Export PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  
  <style>
    @media print {
      @page { size: A4 landscape; margin: 10mm; }
      body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    }
  </style>
</head>

<body class="flex h-screen overflow-hidden lang-ar">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="header-title" data-ar="Ø¨Ù„Ø§ØºØ§Øª 937" data-en="AOUNAK">Ø¹ÙÙ€Ù€Ù€Ù€Ù€Ù€ÙˆÙ†ÙÙƒ</div>
      <img src="/icon/hospital-logo.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰" class="header-logo">
      <button id="langToggle" class="lang-toggle-btn">
        <img src="/icon/lang.png" alt="language" class="lang-icon" />
        <span id="langText">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© | English</span>
      </button>
    </div>
  </header>

  <!-- Sidebar -->
  <aside>
    <ul class="sidebar-menu">
      <li><a href="/login/login.html" class="menu-link" data-ar="Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" data-en="Home Page">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li><a href="overview.html" class="menu-link" data-ar="Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©" data-en="Overview">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</a></li>
      <li><a href="report-937.html" class="menu-link" data-ar="Ù…Ø¤Ø´Ø± Ø¨Ù„Ø§ØºØ§Øª 937" data-en="937 Report Index">Ù…Ø¤Ø´Ø± Ø¨Ù„Ø§ØºØ§Øª 937</a></li>
      <li><a href="misconduct.html" class="menu-link" data-ar="Ø¨Ù„Ø§ØºØ§Øª Ø³ÙˆØ¡ Ø§Ù„ØªØ¹Ø§Ù…Ù„" data-en="Misconduct Reports">Ø¨Ù„Ø§ØºØ§Øª Ø³ÙˆØ¡ Ø§Ù„ØªØ¹Ø§Ù…Ù„</a></li>
      <li><a href="pressganey.html" class="menu-link active" data-ar="Ù…Ø¤Ø´Ø± Ø¨Ø±Ø³Ø¬ÙŠÙ†ÙŠ " data-en="Press Ganey Index">Ù…Ø¤Ø´Ø± Ø¨Ø±Ø³Ø¬ÙŠÙ†ÙŠ </a></li>
      <li><a href="inperson-complaints.html" class="menu-link" data-ar="Ù…Ø¤Ø´Ø± Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ø­Ø¶ÙˆØ±ÙŠØ©" data-en="In-person Complaints">Ù…Ø¤Ø´Ø± Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ø­Ø¶ÙˆØ±ÙŠØ©</a></li>
      <li><a href="secret-visitor.html" class="menu-link" data-ar="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø²Ø§Ø¦Ø± Ø§Ù„Ø³Ø±ÙŠ" data-en="Secret Visitor Notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø²Ø§Ø¦Ø± Ø§Ù„Ø³Ø±ÙŠ</a></li>
      <li><a href="general-requests.html" class="menu-link" data-ar="Ù…Ø¤Ø´Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©" data-en="General Requests Index">Ù…Ø¤Ø´Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</a></li>
    </ul>
  </aside>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col p-8 overflow-auto" style="margin-right: 250px; margin-top: 75px;">
    
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­ÙƒÙ… -->
    <div class="flex flex-wrap gap-3 items-center justify-center mb-6">
      <input id="excelInput" type="file" multiple accept=".xlsx,.xls" class="hidden">
      <button id="importExcelBtn" class="bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-2 px-5 rounded-full shadow flex items-center">
        <i class="fas fa-file-excel ml-2"></i>
        <span data-ar="Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù„ÙØ§Øª Ø¥ÙƒØ³Ù„" data-en="Import Excel Files">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù„ÙØ§Øª Ø¥ÙƒØ³Ù„</span>
      </button>

      <button id="saveToServerBtn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-5 rounded-full shadow flex items-center">
        <i class="fas fa-save ml-2"></i>
        <span data-ar="Ø­ÙØ¸ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª" data-en="Save to Database">Ø­ÙØ¸ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
      </button>
    </div>

    <!-- Ø§Ù„ÙƒØ±ÙˆØª -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <div class="bg-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center text-center">
        <p class="text-sm text-gray-500 mb-2" data-ar="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ØªÙŠ Ø¨Ù„ØºØª Ù†Ø³Ø¨Ø© ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†" data-en="Total departments that reached survey completion rate">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ØªÙŠ Ø¨Ù„ØºØª Ù†Ø³Ø¨Ø© ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†</p>
        <p class="text-4xl font-bold text-blue-600" id="totalDepartmentsSurvey">0</p>
      </div>
      <div class="bg-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center text-center">
        <p class="text-sm text-gray-500 mb-2" data-ar="Ù…ØªÙˆØ³Ø· Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±Ø¶Ø§ Ø§Ù„Ø¹Ø§Ù… Ù„Ù„Ù…Ø³ØªØ´ÙÙ‰" data-en="Average hospital general satisfaction score">Ù…ØªÙˆØ³Ø· Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±Ø¶Ø§ Ø§Ù„Ø¹Ø§Ù… Ù„Ù„Ù…Ø³ØªØ´ÙÙ‰</p>
        <p class="text-4xl font-bold text-green-600" id="averageSatisfactionScore">0.0</p>
      </div>
    </div>
<!-- ğŸ”¹ Ø§Ù„ÙÙ„Ø§ØªØ± (ÙÙˆÙ‚ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„ÙƒØ¨ÙŠØ±) -->
<div class="flex justify-end gap-3 mb-4">
  <select id="quarterFilter" class="border rounded-lg px-3 py-2 text-gray-700">
    <option value="" selected hidden>Ø§Ø®ØªØ± Ø§Ù„Ø±Ø¨Ø¹</option>
    <option value="Q1">Ø§Ù„Ø±Ø¨Ø¹ Ø§Ù„Ø£ÙˆÙ„</option>
    <option value="Q2">Ø§Ù„Ø±Ø¨Ø¹ Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
    <option value="Q3">Ø§Ù„Ø±Ø¨Ø¹ Ø§Ù„Ø«Ø§Ù„Ø«</option>
    <option value="Q4">Ø§Ù„Ø±Ø¨Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø¹</option>
  </select>

  <select id="yearFilter" class="border rounded-lg px-3 py-2 text-gray-700">
    <option value="" selected hidden>Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©</option>
    <option value="2023">2023</option>
    <option value="2024">2024</option>
    <option value="2025">2025</option>
    <option value="2026">2026</option>
    <option value="2027">2027</option>
  </select>
</div>

<!-- Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„ÙƒØ¨ÙŠØ± -->
<div class="bg-white rounded-lg shadow-md p-6 mb-8">
  <h2 class="text-xl font-semibold text-gray-800 mb-6 text-center">
    Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¶Ø§ Ø§Ù„Ø¹Ø§Ù… Ù„Ù„Ù…Ø³ØªØ´ÙÙ‰
  </h2>
  <div class="chart-row">
    <div class="relative w-64 h-64"><canvas id="overallSatisfactionChart"></canvas></div>
    <div class="legend-side" id="legend-overall">
      <div class="legend-item">
        <span class="legend-left"><span class="legend-dot" style="background:#22C55E"></span>Ø±Ø§Ø¶ÙŠ</span>
        <span class="legend-pct" id="overall-satisfied">0%</span>
      </div>
      <div class="legend-item">
        <span class="legend-left"><span class="legend-dot" style="background:#EF4444"></span>ØºÙŠØ± Ø±Ø§Ø¶ÙŠ</span>
        <span class="legend-pct" id="overall-notSatisfied">0%</span>
      </div>
    </div>
  </div>
</div>

    

    <!-- Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù… -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
      
      <!-- Ù…Ø«Ø§Ù„: Ø§Ù„Ø·Ø¨ Ø§Ù„Ù…Ù†Ø²Ù„ÙŠ -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Ø§Ù„Ø·Ø¨ Ø§Ù„Ù…Ù†Ø²Ù„ÙŠ</h3>
        <div class="chart-row">
          <div class="relative w-36 h-36 mx-auto"><canvas id="homeMedicineChart"></canvas></div>
          <div class="legend-side">
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#22C55E"></span>Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="homeMedicine-satisfied">0%</span>
            </div>
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#EF4444"></span>ØºÙŠØ± Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="homeMedicine-notSatisfied">0%</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ø£Ø´Ø¹Ø© -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Ø§Ù„Ø£Ø´Ø¹Ø©</h3>
        <div class="chart-row">
          <div class="relative w-36 h-36 mx-auto"><canvas id="radiologyChart"></canvas></div>
          <div class="legend-side">
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#22C55E"></span>Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="radiology-satisfied">0%</span>
            </div>
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#EF4444"></span>ØºÙŠØ± Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="radiology-notSatisfied">0%</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©</h3>
        <div class="chart-row">
          <div class="relative w-36 h-36 mx-auto"><canvas id="outpatientChart"></canvas></div>
          <div class="legend-side">
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#22C55E"></span>Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="outpatient-satisfied">0%</span>
            </div>
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#EF4444"></span>ØºÙŠØ± Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="outpatient-notSatisfied">0%</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ø£Ø³Ù†Ø§Ù† -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Ø§Ù„Ø£Ø³Ù†Ø§Ù†</h3>
        <div class="chart-row">
          <div class="relative w-36 h-36 mx-auto"><canvas id="dentistryChart"></canvas></div>
          <div class="legend-side">
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#22C55E"></span>Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="dentistry-satisfied">0%</span>
            </div>
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#EF4444"></span>ØºÙŠØ± Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="dentistry-notSatisfied">0%</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</h3>
        <div class="chart-row">
          <div class="relative w-36 h-36 mx-auto"><canvas id="emergencyChart"></canvas></div>
          <div class="legend-side">
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#22C55E"></span>Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="emergency-satisfied">0%</span>
            </div>
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#EF4444"></span>ØºÙŠØ± Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="emergency-notSatisfied">0%</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„ØªÙ†ÙˆÙŠÙ… -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ØªÙ†ÙˆÙŠÙ…</h3>
        <div class="chart-row">
          <div class="relative w-36 h-36 mx-auto"><canvas id="inpatientChart"></canvas></div>
          <div class="legend-side">
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#22C55E"></span>Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="inpatient-satisfied">0%</span>
            </div>
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#EF4444"></span>ØºÙŠØ± Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="inpatient-notSatisfied">0%</span>
            </div>
          </div>
        </div>
      </div>
<!-- Ø§Ù„ÙˆÙÙŠØ§Øª -->
<div class="bg-white rounded-lg shadow-md p-4">
  <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Ø§Ù„ÙˆÙÙŠØ§Øª</h3>
  <div class="chart-row">
    <div class="relative w-36 h-36 mx-auto"><canvas id="mortalityChart"></canvas></div>
    <div class="legend-side">
      <div class="legend-item">
        <span class="legend-left"><span class="legend-dot" style="background:#22C55E"></span>Ø±Ø§Ø¶ÙŠ</span>
        <span class="legend-pct" id="mortality-satisfied">0%</span>
      </div>
      <div class="legend-item">
        <span class="legend-left"><span class="legend-dot" style="background:#EF4444"></span>ØºÙŠØ± Ø±Ø§Ø¶ÙŠ</span>
        <span class="legend-pct" id="mortality-notSatisfied">0%</span>
      </div>
    </div>
  </div>
</div>


      <!-- Ø¨Ù†Ùƒ Ø§Ù„Ø¯Ù… -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Ø¨Ù†Ùƒ Ø§Ù„Ø¯Ù…</h3>
        <div class="chart-row">
          <div class="relative w-36 h-36 mx-auto"><canvas id="bloodBankChart"></canvas></div>
          <div class="legend-side">
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#22C55E"></span>Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="bloodBank-satisfied">0%</span>
            </div>
            <div class="legend-item">
              <span class="legend-left"><span class="legend-dot" style="background:#EF4444"></span>ØºÙŠØ± Ø±Ø§Ø¶ÙŠ</span>
              <span class="legend-pct" id="bloodBank-notSatisfied">0%</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Ù…Ø±Ø¨Ø¹ Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯ -->
      <div class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg shadow-md p-4 border-2 border-dashed border-blue-300 hover:border-blue-400 transition-all duration-200 cursor-pointer" onclick="openAddDepartmentModal()">
        <div class="flex flex-col items-center justify-center h-full text-center">
          <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mb-4">
            <i class="fas fa-plus text-white text-2xl"></i>
          </div>
          <h3 class="text-lg font-semibold text-blue-700 mb-2">Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯</h3>
          <p class="text-sm text-blue-600">Ø§Ø¶ØºØ· Ù„Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯</p>
        </div>
      </div>
    </div>

    <!-- Ø²Ø± Ø§Ù„ØªØµØ¯ÙŠØ± -->
    <div class="flex justify-center mt-8">
      <button id="exportReportBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-full shadow-lg flex items-center">
        <i class="fas fa-download ml-2"></i>
        <span data-ar="ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ±" data-en="Export Report">ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ±</span>
      </button>
    </div>

  </div>

  <!-- Modal Ù„Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯ -->
  <div id="addDepartmentModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 data-ar="Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯" data-en="Add New Department">Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯</h3>
        <button class="modal-close" onclick="closeAddDepartmentModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="addDepartmentForm">
          <div class="form-group">
            <label for="departmentNameAr" data-ar="Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… (Ø¹Ø±Ø¨ÙŠ)" data-en="Department Name (Arabic)">Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… (Ø¹Ø±Ø¨ÙŠ)</label>
            <input type="text" id="departmentNameAr" name="departmentNameAr" required 
                   placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">
          </div>
          <div class="form-group">
            <label for="departmentNameEn" data-ar="Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… (Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)" data-en="Department Name (English)">Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… (Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)</label>
            <input type="text" id="departmentNameEn" name="departmentNameEn" required 
                   placeholder="Enter department name in English">
          </div>
          <div class="form-group">
            <label for="satisfiedPercentage" data-ar="Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¶Ø§ (%)" data-en="Satisfaction Percentage (%)">Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¶Ø§ (%)</label>
            <input type="number" id="satisfiedPercentage" name="satisfiedPercentage" min="0" max="100" 
                   placeholder="Ø£Ø¯Ø®Ù„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¶Ø§">
          </div>
          <div class="form-group">
            <label for="notSatisfiedPercentage" data-ar="Ù†Ø³Ø¨Ø© Ø¹Ø¯Ù… Ø§Ù„Ø±Ø¶Ø§ (%)" data-en="Dissatisfaction Percentage (%)">Ù†Ø³Ø¨Ø© Ø¹Ø¯Ù… Ø§Ù„Ø±Ø¶Ø§ (%)</label>
            <input type="number" id="notSatisfiedPercentage" name="notSatisfiedPercentage" min="0" max="100" 
                   placeholder="Ø£Ø¯Ø®Ù„ Ù†Ø³Ø¨Ø© Ø¹Ø¯Ù… Ø§Ù„Ø±Ø¶Ø§">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeAddDepartmentModal()" 
                data-ar="Ø¥Ù„ØºØ§Ø¡" data-en="Cancel">Ø¥Ù„ØºØ§Ø¡</button>
        <button type="button" class="btn btn-primary" onclick="saveNewDepartment()" 
                data-ar="Ø­ÙØ¸" data-en="Save">Ø­ÙØ¸</button>
      </div>
    </div>
  </div>

  <style>
    /* Modal Styles */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px;
      border-bottom: 1px solid #e5e7eb;
    }

    .modal-header h3 {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 600;
      color: #111827;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #6b7280;
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      transition: all 0.2s;
    }

    .modal-close:hover {
      background-color: #f3f4f6;
      color: #374151;
    }

    .modal-body {
      padding: 24px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #374151;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.2s;
    }

    .form-group input:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      padding: 20px 24px;
      border-top: 1px solid #e5e7eb;
    }

    .btn {
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
    }

    .btn-secondary {
      background-color: #f3f4f6;
      color: #374151;
    }

    .btn-secondary:hover {
      background-color: #e5e7eb;
    }

    .btn-primary {
      background-color: #3b82f6;
      color: white;
    }

    .btn-primary:hover {
      background-color: #2563eb;
    }
  </style>

<script>
  (function () {
    // Ø§Ø³ØªØ®Ø¯Ù…ÙŠ Ù†ÙØ³ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø¹Ù†Ø¯Ùƒ: localStorage.user ÙŠØ­ØªÙˆÙŠ RoleID
    function redirectByRole() {
      const user = JSON.parse(localStorage.getItem('user') || 'null');
      if (!user) return '/login/login.html';

      const roleId = Number(user.RoleID || user.roleId);
      if (roleId === 1) return '/superadmin/superadmin-home.html'; // Ø³ÙˆØ¨Ø± Ø£Ø¯Ù…Ù†
      if (roleId === 2) return '/employee/employee-home.html';   // Ù…ÙˆØ¸Ù
      if (roleId === 3) return '/dept-admin/dept-admin.html';      // Ø£Ø¯Ù…Ù†
      return '/login/login.html'; // Ø§Ø­ØªÙŠØ§Ø·ÙŠ
    }

    // ÙƒÙ„ Ø±ÙˆØ§Ø¨Ø· "Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
    const homeLinks = document.querySelectorAll(
      'aside .sidebar-menu a.menu-link[href$="/login/login.html"], aside .sidebar-menu a.menu-link[data-en="Home Page"], aside .sidebar-menu a.menu-link[data-ar="Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"]'
    );

    homeLinks.forEach(a => {
      // Ø®ÙÙ„Ù‘ÙŠ Ø§Ù„Ù†Ù‚Ø± ÙŠÙˆØ¬Ù‘Ù‡ Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆØ±
      a.addEventListener('click', (e) => {
        e.preventDefault();
        window.location.href = redirectByRole();
      });

      // (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ø¹Ø¯Ù‘Ù„ÙŠ Ø§Ù„Ù€ href Ø§Ù„Ø¸Ø§Ù‡Ø± Ù„Ù„Ù€ Hover/Copy
      a.setAttribute('href', redirectByRole());
    });
  })();
</script>

<!-- PDF deps (Ù†Ø³ØªØ®Ø¯Ù… jsPDF + html2canvas + AutoTable Ø¨Ø¯Ù„ html2pdf) -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.3/dist/jspdf.plugin.autotable.min.js"></script>

<!-- Ø²Ø± PDF Ø¨Ø¬Ø§Ù†Ø¨ Ø²Ø± "ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ±" Ø§Ù„Ø­Ø§Ù„ÙŠ -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const host = document.querySelector('#exportReportBtn')?.parentElement;
    if (!host) return;
    const pdfBtn = document.createElement('button');
    pdfBtn.id = 'exportPressganeyPdfBtn';
    pdfBtn.className = 'ml-3 bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-full shadow-lg flex items-center';
    pdfBtn.innerHTML = '<i class="fas fa-file-signature ml-2"></i><span>ØªØµØ¯ÙŠØ± PDF </span>';
    host.appendChild(pdfBtn);
  });
</script>

  <script src="pressganey.js"></script>
  <script src="pressganey_pdf_functions.js"></script>
</body>
</html>
